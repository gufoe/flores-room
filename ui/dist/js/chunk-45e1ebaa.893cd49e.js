(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45e1ebaa"],{"68f6":function(e,t,s){},"6cb3":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",[e._v(e._s(e.form.id?"Edit":"Create")+" Room")]),s("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.save()}}},[s("div",{staticClass:"form-section"},[s("h3",{staticClass:"text-center"},[e._v("\n        Info\n      ")]),s("div",{staticClass:"my-form-row"},[e._v("\n        Name\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),s("div",{staticClass:"my-form-row"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.is_dorm,expression:"form.is_dorm"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.is_dorm)?e._i(e.form.is_dorm,null)>-1:e.form.is_dorm},on:{change:function(t){var s=e.form.is_dorm,r=t.target,o=!!r.checked;if(Array.isArray(s)){var i=null,a=e._i(s,i);r.checked?a<0&&e.$set(e.form,"is_dorm",s.concat([i])):a>-1&&e.$set(e.form,"is_dorm",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.form,"is_dorm",o)}}}),e._v("\n          This room is a dorm\n        ")])]),s("transition",{attrs:{name:"fade"}},[e.form.is_dorm?s("div",{staticClass:"my-form-row"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.is_female_only,expression:"form.is_female_only"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.is_female_only)?e._i(e.form.is_female_only,null)>-1:e.form.is_female_only},on:{change:function(t){var s=e.form.is_female_only,r=t.target,o=!!r.checked;if(Array.isArray(s)){var i=null,a=e._i(s,i);r.checked?a<0&&e.$set(e.form,"is_female_only",s.concat([i])):a>-1&&e.$set(e.form,"is_female_only",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.form,"is_female_only",o)}}}),e._v("\n            Exclusive for females\n          ")])]):e._e()])],1),s("div",{staticClass:"form-section"},[s("h2",{staticClass:"text-center"},[e._v("\n        Features\n      ")]),e._l(e.$store.room_perks,(function(t){return s("div",{key:t,staticClass:"my-form-row"},[s("label",[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.form.perks.includes(t)},on:{change:function(s){e.form.perks.includes(t)?e.form.perks.splice(e.form.perks.indexOf(t),1):e.form.perks.push(t)}}}),e._v("\n          "+e._s(e.$t("room-perk."+t))+"\n        ")])])}))],2),e.form.is_dorm?e._e():s("div",{staticClass:"form-section text-center"},[s("h2",[e._v("\n        Price\n      ")]),s("price-input",{staticClass:"form-control",model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),s("div",{staticClass:"form-section"},[s("h2",{staticClass:"text-center"},[e._v("\n        Beds\n      ")]),s("div",{staticClass:"row text-center"},[s("div",{staticClass:"col-6"},[e._v("\n          Bed\n        ")]),s("div",{staticClass:"col-6"},[e._v("\n          Bunk bed\n        ")]),e._l(e.$store.bed_types,(function(t){return s("div",{key:t,staticClass:"col-3 lh-2 text-center",staticStyle:{"justify-content":"bottom"}},[e._v("\n          "+e._s(e.$t(("bed-type."+t).replace("-bunk","")))+"\n          "),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.shape[t],expression:"form.shape[type]"}],staticClass:"form-control text-center",staticStyle:{width:"3rem",margin:"0 auto .5rem"},attrs:{type:"number",step:"1",min:"0"},domProps:{value:e.form.shape[t]},on:{input:function(s){s.target.composing||e.$set(e.form.shape,t,s.target.value)}}})])}))],2)]),e.form.is_dorm?s("div",{staticClass:"form-section"},[s("h2",{staticClass:"text-center"},[e._v("\n        Bed Prices\n      ")]),s("div",{staticClass:"row"},e._l([1,2],(function(t){return s("div",{key:t,staticClass:"col text-center lh-2"},[e._v("\n          "+e._s(e.$t("bed-price."+t))+"\n          "),s("br"),s("price-input",{model:{value:e.form["b"+t+"_price"],callback:function(s){e.$set(e.form,"b"+t+"_price",s)},expression:"form[`b${s}_price`]"}})],1)})),0)]):e._e(),s("div",{staticClass:"text-center",staticStyle:{margin:"2rem 0 0"}},[s("button",{staticClass:"btn btn-danger",attrs:{disabled:e.is_saving,type:"button"},on:{click:function(t){return t.preventDefault(),e.$router.back()}}},[e._v("Back")]),e._v("\n      Â \n      "),s("button",{staticClass:"btn btn-primary",attrs:{disabled:e.is_saving,type:"submit"}},[e._v("Save")])]),s("pre",[e._v(e._s(e.form))])])])},o=[],i=(s("7514"),s("a481"),{props:{place:{type:Object,required:!0}},data:function(){return{form:null,is_saving:!1,original:null}},methods:{save:function(){var e=this;this.is_saving=!0,console.log("saving"),this.$http.post("rooms",this.form).then((function(t){e.original?Object.assign(e.original,t.data):e.place.rooms.push(t.data),e.$router.back(),e.$router.replace({name:"manage-rooms",params:{id:e.$route.params.id}})})).finally((function(){e.is_saving=!1}))}},watch:{"$route.params.room_id":{immediate:!0,handler:function(e){console.log("room_id changed");var t=null;if(e){if(t=this.place.rooms.find((function(t){return t.id==e})),!t)return this.$router.back();this.original=t}this.form=this.$utils.clone(t)||{place_id:this.place.id,shape:{},perks:[]}}}}}),a=i,n=(s("9d9a"),s("2877")),c=Object(n["a"])(a,r,o,!1,null,null,null);t["default"]=c.exports},"9d9a":function(e,t,s){"use strict";var r=s("68f6"),o=s.n(r);o.a}}]);
//# sourceMappingURL=chunk-45e1ebaa.893cd49e.js.map