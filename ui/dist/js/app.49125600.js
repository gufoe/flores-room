(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={app:0},i={app:0},r=[];function s(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-24826294":"f7030f99","chunk-2d0afaa8":"e44eb8e3","chunk-2d0c8672":"3e2e0b94","chunk-2d21007a":"1365381b","chunk-45e1ebaa":"e118dc11","chunk-738cafb0":"abd4a73d","chunk-2d0dd7af":"2756baf5","chunk-b8f0ca26":"3f9e738e","chunk-a9a1ac52":"b6aec722","chunk-ef00e4e8":"1ece5fdc"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-24826294":1,"chunk-45e1ebaa":1,"chunk-738cafb0":1,"chunk-b8f0ca26":1,"chunk-a9a1ac52":1,"chunk-ef00e4e8":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-24826294":"0e433876","chunk-2d0afaa8":"31d6cfe0","chunk-2d0c8672":"31d6cfe0","chunk-2d21007a":"31d6cfe0","chunk-45e1ebaa":"bb23083f","chunk-738cafb0":"0722984a","chunk-2d0dd7af":"31d6cfe0","chunk-b8f0ca26":"0e433876","chunk-a9a1ac52":"b52ad12e","chunk-ef00e4e8":"52a4f180"}[t]+".css",i=c.p+a,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var l=r[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===i))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===a||u===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var a=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete o[t],p.parentNode.removeChild(p),n(r)},p.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){o[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(p);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}i[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var p=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"292a":function(t,e,n){},"435c":function(t,e,n){"use strict";var a=n("a58b"),o=n.n(a);o.a},"4ac2":function(t,e,n){"use strict";var a=n("deed"),o=n.n(a);o.a},"50d0":function(t,e,n){},"53e8":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("4917"),n("28a5"),n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=n("a925"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-height",attrs:{id:"app"}},[t.$store.is_ready?n("div",{staticClass:"full-height"},[n("div",{staticClass:"row menu"},[n("div",{attrs:{selected:"home"==t.$route.name},on:{click:function(e){return t.$router.push({name:"home"})}}},[n("span",[t._v("Home")])]),n("div",{attrs:{selected:"account"==t.$route.name},on:{click:function(e){return t.$router.push({name:"account"})}}},[t.$store.user?n("span",[t._v("Account")]):n("span",[t._v("Login")])]),t.$store.user&&t.$store.user.places.length?n("div",{attrs:{selected:["manage-places"].includes(t.$route.name)},on:{click:function(e){return t.$router.push({name:"manage-places"})}}},[n("span",[t._v("Places")])]):t._e(),t.$store.user&&t.$store.user.is_admin?n("div",{attrs:{selected:["admin"].includes(t.$route.name)},on:{click:function(e){return t.$router.push({name:"admin"})}}},[n("span",[t._v("Admin")])]):t._e()]),t.needs_login?n("login",{attrs:{id:"content"}}):t.is_allowed?n("div",{staticClass:"full-height-scroll",attrs:{id:"content"}},[n("router-view",{staticClass:"animate-fadein"})],1):n("div",{staticClass:"text-center is-middle pb-5",attrs:{id:"content"}},[n("h1",[t._v("Not Allowed")]),n("i",[t._v("You do not have the permissions to view this page")])])],1):n("loading-screen",[t._v("\n    Loading page...\n  ")])],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-middle text-center",staticStyle:{padding:"3rem 1rem"}},[t.$store.user?n("div",[t._v("\n    You are logged in and you should not be seeing this page\n    "),n("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.$store.logout()}}},[t._v("Logout")]),"facebook"==t.$store.user.auth_driver?n("a",{attrs:{target:"_blank",href:"https://www.facebook.com/app_scoped_user_id/"+t.$store.user.auth_id}},[t._v("Go to PROFILE")]):t._e()]):n("div",[t.nested?t._e():n("h1",{staticClass:"nm mb-4"},[t._v("Login")]),t.is_loading?n("div",[t._v("\n      Loading...\n    ")]):n("div",[n("div",{staticClass:"mb-4"},[t._v("\n        You can login or signup using the button below\n      ")]),n("button",{staticClass:"btn",staticStyle:{background:"#3b5998",color:"#fff"},on:{click:function(e){return t.login_fb()}}},[t._v("\n        Login with Facebook\n      ")]),t.nested?t._e():n("div",{staticClass:"my-4"},[t._v("\n        Flores Room version "),n("code",[t._v(t._s(t.$store.ui_version))])]),t.nested?t._e():n("div",{staticClass:"pb-5"})])])])},c=[],l={props:{nested:{type:Boolean}},data:function(){return{is_loading:!0}},mounted:function(){var t=this;this._int=setInterval((function(){window.FB&&window.FB.__ready&&(console.log("fb found"),clearInterval(t._int),window.FB.init({appId:t.$config.fb_key,autoLogAppEvents:!1,xfbml:!1,version:"v4.0"}),window.FB.getLoginStatus((function(){console.log("login status found"),t.is_loading=!1})))}),200)},beforeDestroy:function(){clearInterval(this._int)},methods:{login_fb:function(){var t=this;this.is_loading=!0,window.FB.login((function(e){e.authResponse?t.$store.loginWithDriver("facebook",null,e.authResponse.accessToken,{finally:function(){t.is_loading=!1}}):t.is_loading=!1}))}}},u=l,d=n("2877"),p=Object(d["a"])(u,s,c,!1,null,null,null),f=p.exports,m={components:{login:f},data:function(){return{modals:[{title:"Error",text:"ciao"}]}},created:function(){this.$store.root=this},computed:{needs_login:function(){return!this.$store.user&&this.$route.meta.auth},is_allowed:function(){return!this.$route.meta.admin||this.$store.user&&this.$store.user.is_admin}}},h=m,v=(n("5c0b"),Object(d["a"])(h,i,r,!1,null,null,null)),_=v.exports,b=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),g=n("8c4f"),k=(n("a481"),n("6b54"),"localhost"==location.hostname),y={api_url:(k?"http://floresroom.x":"")+"/api/",fb_key:k?"1842460349364769":"2189561351345047",app_url:k?location.href.split("#")[0].split("?")[0]:"https://www.floresroom.com/"},w={compress:function(t){return btoa(t)},decompress:function(t){return atob(t)}},C={unpack:function(t){return JSON.parse(w.decompress(t,{inputEncoding:"Base64"}))},pack:function(t){return w.compress(JSON.stringify(t),{outputEncoding:"Base64"})},rand_str:function(t,e){e=e||"QWERTYUIOPLKJHGFDSAZXCVBNMqwertyuioplkjhgfdsazxcvbnm1234567890";var n="";while(n.length<10)n+=e[Math.floor(Math.random()*e.length)];return n},hash:function(t){"string"!=typeof t&&(t=JSON.stringify(t));var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){var a=t.charCodeAt(n);e=(e<<5)-e+a,e&=e}return Math.abs(e).toString(16).toUpperCase()},clone:function(t){return JSON.parse(JSON.stringify(t))},image_lg:function(t){return y.api_url+"../storage/"+t+"-lg.jpg"},image_md:function(t){return y.api_url+"../storage/"+t+"-md.jpg"},image_sm:function(t){return y.api_url+"../storage/"+t+"-sm.jpg"},resizeImage:function(t,e){var n=new Image,a=1e3,o=1e3;n.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d"),r=n.width,s=n.height,c=Math.min(a/r,o/s),l=r*c,u=s*c;t.width=l,t.height=u,i.drawImage(n,0,0,l,u),t.toDataURL&&e(t.toDataURL("image/jpeg",.85).replace("data:image/jpeg;base64,",""))},console.log(t),n.src=URL.createObjectURL(t)}},$=C.hash(document.head.innerHTML),x={ui_version:$,is_ready:!1,user:null,$http:null,place_types:["homestay","residence","guesthouse","hostel","hotel"],place_perks:["coffee-tea","restaurant","bar","swimming-pool","pool-table"],room_perks:["ac","desk","private-bathroom","hot-shower","window","terrace"],bed_types:["single","double","single-bunk","double-bunk"],install:function(t){var e=this;this.$http=t.prototype.$http,this.refreshUser({finally:function(){return e.is_ready=!0}})},refreshUser:function(t){var e=this;t=t||{};var n=localStorage.getItem("token");return n?(this.updateToken(n),this.$http.get("user").then((function(n){e.updateUser(n.data),t.success&&t.success()}),(function(){e.updateUser(null),e.updateToken(null),t.fail&&t.fail()})).finally((function(){t.finally&&t.finally()})),!0):(t.fail&&t.fail(),t.finally&&t.finally(),!1)},loginWithDriver:function(t,e,n,a){var o=this;a=a||{},this.$http.post("login",{driver:t,id:e,token:n}).then((function(t){o.updateUser(t.data.user),o.updateToken(t.data.token),a.success&&a.success()}),(function(){o.updateUser(null),o.updateToken(null),a.fail&&a.fail()})).finally((function(){a.finally&&a.finally()}))},updateUser:function(t){this.user=t},updateToken:function(t){t?this.$http.defaults.headers.common["Authorization"]=t:delete this.$http.defaults.headers.common["Authorization"],localStorage.setItem("token",t||"")},logout:function(){this.$http.post("logout"),this.updateToken(null),this.updateUser(null)}},S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-padded text-center"},[n("h4",{staticClass:"m-0"},[t._v("Welcome to")]),n("h1",{staticClass:"m-0"},[t._v("Flores Room")]),n("i",[t._v("Your finest cheapest room")]),n("div",{staticClass:"my-4"},[n("search-box")],1),t.$store.user?t._e():n("div",[t._m(0),n("button",{staticClass:"btn btn-outline-primary my-3",on:{click:function(e){return t.$router.push({name:"account"})}}},[t._v("Sign Up!")])]),t.$store.user&&t.$store.user.places.length?n("div",{staticClass:"mt-2"},[n("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.$router.push({name:"manage-places"})}}},[t._v("Manage your places!")])]):t._e()])},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n      This project will allow local "),n("b",[t._v("guesthouses")]),t._v(" and "),n("b",[t._v("homestays")]),t._v(" to receive and manage\n      bookings "),n("b",[t._v("easily")]),t._v(" and with "),n("b",[t._v("minimal fees")]),t._v(".\n    ")])}],j={},E=j,L=Object(d["a"])(E,S,O,!1,null,null,null),P=L.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.places?"view-result"==t.$route.name?n("div",[t.selected_place?n("view-place",{attrs:{src_place:t.selected_place,src_filters:t.filters}}):n("div",{staticClass:"p-5 text-center"},[t._v("\n    This place is not available anymore\n    "),n("br"),n("br"),n("button",{staticClass:"btn btn-outline-danger",on:{click:function(e){return t.$router.back()}}},[t._v("Go Back")])])],1):n("div",{staticClass:"page-places"},[n("div",{staticClass:"page-padded"},[n("h1",{staticClass:"mt-3 mb-2"},[t._v("Results")]),t.places?t.places.length?n("div",[t._v("\n      "+t._s(t.places.length)+" places found\n      🙂\n    ")]):n("div",[t._v("\n      No places found 🥺\n    ")]):n("div",[t._v("\n      Loading... 🧐\n    ")]),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$router.push({name:"home"})}}},[t._v("Change search")])]),t._l(t.places,(function(e){return n("div",{staticClass:"result row",on:{click:function(n){return t.$router.push({name:"view-result",params:{id:e.id},query:t.$route.query})}}},[n("div",{directives:[{name:"square",rawName:"v-square"}],staticClass:"col-5 res-pic",style:e.pics.length&&"background-image: url("+t.$utils.image_md(e.pics[0])+")"}),n("div",{staticClass:"col res-info"},[n("div",{staticStyle:{"font-size":"1.1rem"}},[t._v(t._s(e.name))]),n("div",{staticClass:"small",staticStyle:{opacity:".7"}},[t._v("\n        "+t._s(e.loc_city)+",\n        "+t._s((e.distance||5*Math.random()).toFixed(1))+" km"),n("div",[t._v("Availability: "+t._s(e.rooms.reduce((function(t,e){return t+e.availability}),0))+" places")]),n("br")])]),n("b",{staticClass:"res-price"},[t._v(t._s(90+Math.floor(60*Math.random()))),n("span",{staticStyle:{"font-size":"70%"}},[t._v(".000 ₹")])])])}))],2):n("loading-screen",[t.is_error?n("div",[t._v("\n    Cannot load results\n    "),n("br"),n("br"),n("button",{staticClass:"btn btn-outline-warning",on:{click:t.reloadResults}},[t._v("Try again")])]):n("div",[t._v("\n    Loading places...\n  ")])])},T=[],N=(n("7514"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.place?n("div",{staticClass:"page-view-place"},[n("div",{staticClass:"page-padded"},[n("h2",[t._v(t._s(t.place.name))]),n("div",{staticClass:"place-info"},[t._v("\n      "+t._s(t.place.loc_addr)+" - "+t._s(t.place.loc_city)+"\n      "),"distance"in t.place?n("span",[t._v("- "+t._s(t.place.distance.toFixed(1))+" km from you")]):t._e()]),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$router.push({name:"results",query:t.$route.query})}}},[t._v("Back to results")])]),t.place.pics.length?n("swiper",{staticStyle:{background:"#eee"},attrs:{options:{slidesPerView:1,spaceBetween:0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"progressbar"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},[t._l(t.place.pics,(function(e){return n("swiper-slide",{key:e},[n("div",{directives:[{name:"square",rawName:"v-square",value:9/16,expression:"9/16"}],style:"margin: 0; background-size: contain; background-position: center center; background-repeat: no-repeat; background-image: url("+t.$utils.image_md(e)+")"})])})),t.place.pics.length>1?[n("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"}),n("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),n("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})]:t._e()],2):t._e(),n("div",{staticClass:"mx-1 mt-4"},[n("div",{staticClass:"row mb-5 no-gutters"},[n("div",{staticClass:"col pr-1"},[n("h3",[t._v("Features")]),t.place.perks.length?t._e():n("div",[t._v("\n          No features\n        ")]),t._l(t.place.perks,(function(e){return n("div",{key:e},[t._v("\n          ✓ "+t._s(t.$t("place_perk."+e))+"\n        ")])}))],2),n("div",{staticClass:"col pl-1"},[n("h3",[t._v("Reviews")]),n("div",[t._v("\n          No reviews yet.\n        ")])])]),t.filters?n("checkout",{attrs:{place:t.place,filters:t.filters}}):t._e()],1)],1):n("loading-screen",[t._v("\n  Loading details...\n")])}),q=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.filters?n("div",{staticClass:"page-checkout"},[(t.private_rooms=t.place.rooms.filter((function(t){return!t.is_dorm}))).length?n("div",{staticClass:"block-primary mb-4"},[t._m(0),t._l(t.private_rooms,(function(e){return n("room",{key:e.id,staticClass:"block-content",attrs:{room:e,booking:t.bookings[e.id],places_left:t.filters.n-(t.booking?t.booking.people:0)}})}))],2):t._e(),(t.dorms=t.place.rooms.filter((function(t){return t.is_dorm}))).length?n("div",{staticClass:"block-primary mb-4"},[t._m(1),t._l(t.dorms,(function(e){return n("room",{key:e.id,staticClass:"block-content",attrs:{room:e,booking:t.bookings[e.id],places_left:t.filters.n-(t.booking?t.booking.people:0)}})}))],2):t._e(),n("div",{staticClass:"block-info checkout mb-5"},[t._m(2),t.$store.user?n("div",{staticClass:"block-content"},[t.booking?n("div",[n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col"},[t._v("\n            Price per night: "),n("b",[n("price",{attrs:{price:t.booking.total_per_night}})],1),n("br"),t._v("\n            Check in: "),n("b",[t._v(t._s(t.$d(t.$utc(t.booking.check_in),"date")))]),n("br"),t._v("\n            Check out: "),n("b",[t._v(t._s(t.$d(t.$utc(t.booking.check_out),"date")))]),n("br"),t._v("\n            Nights: "),n("b",[t._v(t._s(t.booking.nights))]),n("br"),t._v("\n            Total price: "),n("b",[n("price",{attrs:{price:t.booking.total}})],1)]),n("div",{staticClass:"col"},[t._v("\n            People: "),n("b",[t._v(t._s(t.filters.n))]),n("br"),n("span",{class:t.booking.people>t.filters.n&&"text-danger"},[t._v("Spaces: "+t._s(t.booking.people))]),n("br")])]),t._m(3),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn btn-info",on:{click:t.checkout}},[t._v("Checkout")])])]):n("div",{staticClass:"py-4"},[t._v("\n        Select the beds/rooms you want\n      ")])]):n("div",{staticClass:"block-content"},[n("login",{attrs:{nested:!0}})],1)])]):t._e()},B=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block-title"},[n("h4",{staticClass:"nm"},[t._v("Private Rooms:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block-title"},[n("h4",{staticClass:"nm"},[t._v("Dorms:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block-title"},[n("h3",{staticClass:"nm"},[t._v("Checkout:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-4"},[t._v("\n          Payment method:\n          "),n("select",{staticClass:"form-control"},[n("optgroup",{attrs:{label:"Saved cards"}},[n("option",[t._v("Mastercard *0984")]),n("option",[t._v("Visa *3283")])]),n("optgroup",{attrs:{label:"New Method"}},[n("option",[t._v("Credit Card")]),n("option",[t._v("Paypal")])])])])}],F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-room"},[n("div",{staticClass:"row gutters-1"},[n("div",{staticClass:"col-6 room-perks mb-1"},[n("div",{staticClass:"mb-1"},[t._v("Features:")]),t._l(t.room.perks,(function(e){return n("div",{key:e,staticClass:"element small"},[t._v("\n        ✓ "+t._s(t.$t("room_perk."+e))+"\n      ")])}))],2),n("div",{staticClass:"col-6 room-shape"},[n("div",{staticClass:"mb-1"},[t._v("Composition:")]),t._l(t.room.shape,(function(e,a){return n("div",{key:a,staticClass:"element small",staticStyle:{"text-transform":"lowercase"}},[n("i",{class:"bed "+a,staticStyle:{"font-size":"1.2rem"}}),t._v("\n         \n        "+t._s(e)+"\n        "+t._s(t.$t("bed_type."+a))+"\n        bed\n      ")])}))],2),n("div",{staticClass:"col-12 mt-2 py-1",staticStyle:{"border-top":"1px solid #ddd"}},[t.room.is_dorm?n("div",{staticClass:"row gutters-1"},t._l([1,2],(function(e){return(t.tot_beds=t.room["b"+e+"_count"])&&(t.price=t.room["b"+e+"_price"])&&(t.av_beds=t.room["av_b"+e],1)?n("div",{key:e,staticClass:"col"},[n("div",[n("span",[t._v("\n              "+t._s(t.$t("bed_type."+(1==e?"single":"double")))+" bed\n              for\n              "),n("price",{staticClass:"text-info",attrs:{price:t.price}})],1),n("div",{staticClass:"small faded mb-1"},[t._v(t._s(t.av_beds)+"/"+t._s(t.tot_beds)+" available")]),t.av_beds?n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-8"},[n("number-input",{attrs:{max:t.av_beds},model:{value:t.booking[e],callback:function(n){t.$set(t.booking,e,n)},expression:"booking[size]"}})],1),n("div",{staticClass:"col"},[t.booking[e]?n("div",[n("price",{staticClass:"text-info",attrs:{price:t.booking[e]*t.room["b"+e+"_price"]}})],1):t._e()])]):t._e()])]):t._e()})),0):n("div",{staticClass:"row align-center gutters-1 mt-3 mb-2"},[n("div",{staticClass:"col text-right mr-2"},[t._v("\n          Total price:\n          "),n("price",{attrs:{price:t.room.price}})],1),n("div",{staticClass:"col"},[t.booking["room"]?n("button",{staticClass:"btn btn-warning",on:{click:function(e){t.booking["room"]=!t.booking["room"]}}},[t._v("\n            Cancel\n          ")]):n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.booking["room"]=!t.booking["room"]}}},[t._v("\n            Select\n          ")])])])])])])},R=[],U=(n("c5f6"),{props:{room:{type:Object,required:!0},booking:{type:Object,required:!0},places_left:{type:Number,required:!0}}}),I=U,A=(n("4ac2"),Object(d["a"])(I,F,R,!1,null,null,null)),z=A.exports,Y={components:{login:f,room:z},props:{place:{type:Object},filters:{type:Object}},data:function(){return{bookings:null,location:location}},created:function(){},computed:{booking:function(){var t=this,e={},n=(this.$utc(this.filters.check_out).getTime()-this.$utc(this.filters.check_in).getTime())/864e5,a=0,o=0,i=this.bookings,r=function(n){for(var r in i[n]){var s=i[n][r];e[r]=(e[r]||0)+s;var c=t.place.rooms.find((function(t){return t.id==n}));o+="room"==r?c.price*s:c["b".concat(r,"_price")]*s,a+="room"==r?s*(c.b1_count+2*c.b2_count):s*r}};for(var s in i)r(s);if(o){var c=o;return o*=n,{place_id:this.place.id,check_in:this.filters.check_in,check_out:this.filters.check_out,counts:e,people:a,total_per_night:c,total:o,nights:n,bookings:i}}}},methods:{checkout:function(){var t=this;this.$http.post("bookings",this.booking).then((function(e){t.$router.push({name:"booking",params:{id:e.data.id}})}))}},watch:{src_place:function(t){this.place=t},"place.rooms":{immediate:!0,handler:function(t){var e={};t.forEach((function(t){return e[t.id]={1:0,2:0,room:0}})),this.bookings=e}}}},J=Y,H=(n("b1b0"),Object(d["a"])(J,M,B,!1,null,null,null)),V=H.exports,W={components:{checkout:V},props:{src_place:{type:Object},src_filters:{type:Object}},data:function(){return{place:this.src_place,filters:this.src_filters}},created:function(){},computed:{},methods:{},watch:{src_place:function(t){this.place=t}}},G=W,K=(n("a3aa"),Object(d["a"])(G,N,q,!1,null,null,null)),X=K.exports,Q={components:{ViewPlace:X},data:function(){return{places:null,is_error:!1}},computed:{filters:function(){return this.$utils.unpack(this.$route.query.q)},selected_place:function(){var t=this.$route.params.id;return t?(this.places||[]).find((function(e){return e.id==t})):null}},methods:{reloadResults:function(){var t=this;this.places=null;var e=this.filters,n={distance_from:{lat:e.lat,lon:e.lon},availability:{n:e.n,check_in:e.check_in,check_out:e.check_out},order_by:"distance"};this.is_error=!1,this.$http.get("places",{params:n}).then((function(e){t.places=e.data}),(function(e){e.response&&400==e.response.status?t.$router.push({name:"home"}):t.is_error=!0}))}},watch:{filters:{immediate:!0,handler:function(t,e){e&&JSON.stringify(t)==JSON.stringify(e)||this.reloadResults()}}}},Z=Q,tt=(n("435c"),Object(d["a"])(Z,D,T,!1,null,null,null)),et=tt.exports;function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(n,!0).forEach((function(e){Object(b["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}a["a"].use(g["a"]);var ot=new g["a"]({mode:"hash",base:"",routes:[{path:"/",name:"home",component:P},{path:"/bookings/",name:"bookings",component:function(){return Promise.all([n.e("chunk-738cafb0"),n.e("chunk-2d0dd7af")]).then(n.bind(null,"8221"))},meta:{auth:!0,admin:!0},children:[{path:":id",name:"booking",meta:{auth:!0,admin:!0}}]},{path:"/admin",name:"admin",component:function(){return n.e("chunk-2d0afaa8").then(n.bind(null,"0efc"))},meta:{auth:!0,admin:!0}},{path:"/account",name:"account",component:function(){return n.e("chunk-2d21007a").then(n.bind(null,"b5c4"))},meta:{auth:!0}},{path:"/host",name:"host",component:function(){return n.e("chunk-2d0c8672").then(n.bind(null,"5573"))},meta:{auth:!0}},{path:"/places",name:"manage-places",component:function(){return n.e("chunk-a9a1ac52").then(n.bind(null,"b601"))},meta:{auth:!0}},{path:"/places/:id/manage",name:"manage-place",component:function(){return n.e("chunk-24826294").then(n.bind(null,"3f63"))},meta:{auth:!0},children:[{path:"rooms",name:"manage-rooms",component:function(){return n.e("chunk-ef00e4e8").then(n.bind(null,"8fea"))},meta:{auth:!0}},{path:"rooms/:room_id?/edit",name:"edit-room",component:function(){return n.e("chunk-45e1ebaa").then(n.bind(null,"6cb3"))},meta:{auth:!0}}]},{path:"/places/:id?/edit",name:"edit-place",component:function(){return Promise.all([n.e("chunk-738cafb0"),n.e("chunk-b8f0ca26")]).then(n.bind(null,"3499"))},meta:{auth:!0}},{path:"/results/",name:"results",component:et,children:[{path:"detail/:id",name:"view-result"}]}]});ot.beforeEach((function(t,e,n){if(!t.meta.middleware)return n();var a=t.meta.middleware,o={to:t,from:e,next:n,store:x};return a[0](at({},o))}));var it=ot,rt=n("bc3a"),st=n.n(rt),ct=n("4328"),lt=n.n(ct),ut={locale:"en",dateTimeFormats:{en:{date:{year:"numeric",month:"numeric",day:"numeric"},datelong:{year:"numeric",month:"long",day:"numeric"},datetime:{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},time:{hour:"numeric",minute:"numeric",second:"numeric"}}},messages:{en:{place_type:{homestay:"Homestay",residence:"Residence",guesthouse:"Guesthouse",hostel:"Hostel",hotel:"Hotel"},room_type:{private:"Private room",dorm:"Dorm"},place_perk:{"coffee-tea":"Free coffee & tea",restaurant:"Restaurant",bar:"Bar","swimming-pool":"Swimming pool","pool-table":"Pool table"},room_perk:{ac:"Air conditioner",desk:"Desk & chair","private-bathroom":"Private bathroom","hot-shower":"Hot shower",window:"Window",terrace:"Terrace"},bed_type:{single:"Single",double:"Double","single-bunk":"Bunk","double-bunk":"Bunk double"},bed_price:{1:"Single bed price",2:"Double bed price"}}}},dt=(n("20d6"),n("768b")),pt=[],ft=function(t,e){t.style.height=t.clientWidth*(e||1)+"px"};window.addEventListener("resize",(function(){pt.forEach((function(t){var e=Object(dt["a"])(t,2),n=e[0],a=e[1];return ft(n,a.value)}))})),a["a"].directive("square",{inserted:function(t,e){pt.push([t,e]),ft(t,e.value)},unbind:function(t){var e=pt.findIndex((function(e){return e[0]===t}));pt.splice(e,1)}});var mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group justify-center"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"form-control text-right",staticStyle:{"max-width":"3rem"},attrs:{type:"number",max:"150",min:"0"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}}),t._m(1)])},ht=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("₹")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text",staticStyle:{"padding-left":".3rem"}},[t._v(".000")])])}],vt={props:["value"],computed:{price:{get:function(){return parseInt(this.value/1e3)||""},set:function(t){this.$emit("input",1e3*(parseInt(t)||0))}}}},_t=vt,bt=Object(d["a"])(_t,mt,ht,!1,null,null,null),gt=bt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v(t._s(parseInt(t.price/1e3))),n("span",{staticStyle:{"font-size":"70%"}},[t.extended?n("span",[t._v(".000 ")]):t._e(),t._v("₹")])])},yt=[],wt={props:{price:{type:Number,default:0},extended:{type:Boolean,default:!1}}},Ct=wt,$t=Object(d["a"])(Ct,kt,yt,!1,null,null,null),xt=$t.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-box"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[n("h3",{staticClass:"mb-2"},[t._v("Your Search")]),n("div",{staticClass:"text-left row no-gutters"},[n("div",{staticClass:"col"},[t._v("\n        Location\n        "),n("location-input",{attrs:{lat:t.form.lat,lon:t.form.lon,"bounding-box":t.form.bounding_box},on:{"update:lat":function(e){return t.$set(t.form,"lat",e)},"update:lon":function(e){return t.$set(t.form,"lon",e)},"update:boundingBox":function(e){return t.$set(t.form,"bounding_box",e)},"update:bounding-box":function(e){return t.$set(t.form,"bounding_box",e)}},model:{value:t.form.display_name,callback:function(e){t.$set(t.form,"display_name",e)},expression:"form.display_name"}})],1),n("div",{staticClass:"col-3 pl-3"},[t._v("\n        People\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.n,expression:"form.n"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.form.n},on:{input:function(e){e.target.composing||t.$set(t.form,"n",e.target.value)}}})])]),n("div",{staticClass:"text-left"},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-6 pr-2"},[n("span",[t._v("Check in")]),n("date-picker",{staticStyle:{width:"100%"},attrs:{lang:t.$i18n.locale,"input-class":"form-control","first-day-of-week":1,format:"DD MMM YYYY","not-before":new Date,"value-type":{value2date:function(e){return t.$utc(e)},date2value:function(t){return t.toStdLocal()}}},model:{value:t.form.check_in,callback:function(e){t.$set(t.form,"check_in",e)},expression:"form.check_in"}})],1),n("div",{staticClass:"col-6 pl-2"},[n("span",[t._v("Check out")]),n("date-picker",{ref:"checkout",staticStyle:{width:"100%"},attrs:{lang:t.$i18n.locale,"input-class":"form-control","first-day-of-week":1,format:"DD MMM YYYY","not-before":t.$utc(t.form.check_in).nextDay(),"value-type":{value2date:function(e){return t.$utc(e)},date2value:function(t){return t.toStdLocal()}}},model:{value:t.form.check_out,callback:function(e){t.$set(t.form,"check_out",e)},expression:"form.check_out"}})],1)])]),n("div",{staticClass:"my-2"},[t.form.lat?n("i",[t._v(" ")]):n("i",[t._v("Select a location from the list")])]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!t.is_search_valid}},[t._v("\n      Search!\n    ")])])])},Ot=[],jt=n("ea76"),Et=n.n(jt),Lt={components:{DatePicker:Et.a},data:function(){var t=localStorage.last_search&&JSON.parse(localStorage.last_search),e=t||{};return(!e.check_in||e.check_in<(new Date).toStdLocal())&&(e.check_in=(new Date).toStdLocal()),e.n||(e.n=2),{console:console,form:e}},computed:{is_search_valid:function(){return this.form.check_in&&this.form.check_out&&this.form.lat&&this.form.lon&&this.form.n>0}},methods:{beautifyLocation:function(t){return(t.display_name||"").split(",").slice(0,2).join(",")},search:function(){localStorage.setItem("last_search",JSON.stringify(this.form)),this.$router.push({name:"results",query:{q:this.$utils.pack(this.form)}})}},watch:{"form.check_in":{immediate:!0,handler:function(t){(!this.form.check_out||t>=this.form.check_out)&&this.$set(this.form,"check_out",this.$utc(t).nextDay().toStdLocal()),this.$refs.checkout&&this.$refs.checkout.$el.querySelector("input").focus(),this.$refs.checkout&&this.$refs.checkout.showPopup()}}}},Pt=Lt,Dt=(n("b7fb"),Object(d["a"])(Pt,St,Ot,!1,null,null,null)),Tt=Dt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cp-loading text-center is-middle"},[t._t("default",[t._v("Loading...")])],2)},qt=[],Mt={},Bt=Mt,Ft=(n("8233"),Object(d["a"])(Bt,Nt,qt,!1,null,null,null)),Rt=Ft.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"location-input"},[n("vue-bootstrap-typeahead",{ref:"loc_search",attrs:{serializer:t.beautifyLocation,data:t.suggestions},on:{hit:function(e){return t.setLocation(e)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),n("i",{staticStyle:{"font-size":".9rem"}},[t._v(" \n    "),t.is_loading?[t._v("Loading...")]:t.is_empty?[t._v("No results")]:t._e()],2)],1)},It=[],At=n("d45f"),zt={components:{VueBootstrapTypeahead:At["a"]},props:{value:{type:String,default:""}},data:function(){return{query:this.value,suggestions:[],is_loading:!1,is_empty:!1,cancel_token:null,load_to:null,watch:!0}},mounted:function(){var t=this;this.$refs.loc_search.inputValue=this.query,this.$nextTick((function(){t.watch=!0}))},methods:{beautifyLocation:function(t){return(t.display_name||"").split(",").slice(0,2).join(",")},updateLocSuggestions:function(t){var e=this;this.load_to&&clearTimeout(this.load_to),this.load_to=setTimeout((function(){if(t){e.is_loading=!0;var n={format:"json",q:t,addressdetails:0,countrycodes:"id"};e.cancel_token&&e.cancel_token.cancel(),e.cancel_token=e.$http.CancelToken.source(),console.log("query location",t),e.$http.get("https://nominatim.openstreetmap.org/search",{cancelToken:e.cancel_token.token,params:n}).then((function(t){e.suggestions=t.data,e.is_empty=!t.data.length})).finally((function(){e.is_loading=!1}))}}),500)},setLocation:function(t){var e=this;this.cancel_token&&this.cancel_token.cancel(),this.load_to&&clearTimeout(this.load_to),this.$emit("input",this.beautifyLocation(t)),this.$emit("update:lat",1*t.lat),this.$emit("update:lon",1*t.lon),this.$emit("update:bounding-box",t.boundingBox),this.watch=!1,this.$nextTick((function(){e.watch=!0}))}},watch:{query:function(t){this.watch&&this.updateLocSuggestions(t)}}},Yt=zt,Jt=(n("656d"),Object(d["a"])(Yt,Ut,It,!1,null,null,null)),Ht=Jt.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"number-input-"+t.variant+" input-group"},[n("div",{staticClass:"input-group-prepend"},[n("button",{class:"btn btn-"+t.variant,attrs:{disabled:t.value<=t.min},on:{click:function(e){return t.set(1*t.value-1)}}},[t._v("\n      -\n    ")])]),n("input",{staticClass:"form-control text-center",staticStyle:{"max-width":"2rem"},attrs:{type:"number"},domProps:{value:t.input},on:{input:function(e){return t.set(e.target.value)}}}),n("div",{staticClass:"input-group-append"},[n("button",{class:"btn btn-"+t.variant,attrs:{disabled:t.value>=t.max},on:{click:function(e){return t.set(1*t.value+1)}}},[t._v("\n      +\n    ")])])])},Wt=[],Gt={props:{variant:{type:String,default:"primary"},value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100}},data:function(){return{input:0}},methods:{set:function(t){var e=this;this.input="",this.$nextTick((function(){""!==t&&(t*=1),e.input=t>e.max?e.max:t<e.min?e.min:t,e.$emit("input",e.input)}))}},watch:{value:{immediate:!0,handler:function(t){""==this.input&&0==t||this.set(t)}}}},Kt=Gt,Xt=(n("712d"),Object(d["a"])(Kt,Vt,Wt,!1,null,null,null)),Qt=Xt.exports;a["a"].component("price",xt),a["a"].component("price-input",gt),a["a"].component("search-box",Tt),a["a"].component("loading-screen",Rt),a["a"].component("location-input",Ht),a["a"].component("number-input",Qt);var Zt=n("7212"),te=n.n(Zt),ee=(n("dfa4"),n("88eb"));a["a"].use(te.a),a["a"].use(ee["a"]);n("5d61");var ne=location.href.split("#")[0];ne!=y.app_url&&(location.href=y.app_url),a["a"].config.productionTip=!1,st.a.defaults.baseURL=y.api_url,a["a"].prototype.$http=st.a,st.a.defaults.headers.common["X-uiv"]=x.ui_version,st.a.interceptors.request.use((function(t){return t.paramsSerializer=function(t){return lt.a.stringify(t,{arrayFormat:"brackets",encode:!1})},t})),st.a.interceptors.response.use((function(t){return t}),(function(t){window.err=t;var e="";return e=t.response?t.response.data.message?t.response.data.message:t.message||"Connection error":t.message,x.root.$bvModal.msgBoxOk(e,{title:"Error!",size:"sm",okVariant:"danger",headerClass:"p-2  text-center border-bottom-0 text-danger",bodyClass:"py-1 px-2 text-center ",footerClass:"p-2 border-top-0 text-center ",centered:!0}),Promise.reject(t)})),a["a"].prototype.$store=window.$store=x,a["a"].prototype.$utils=window.$utils=C,a["a"].prototype.$config=window.$config=y,a["a"].prototype.$utc=function(t){if(!t)return new Date;var e=t.match(/\d+/g);return new Date(Date.UTC(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0))},Date.prototype.toStdLocal=function(){return this.getFullYear()+"-"+("00"+(this.getMonth()+1)).slice(-2)+"-"+("00"+this.getDate()).slice(-2)},Date.prototype.nextDay=function(){return new Date(this.getTime()+864e5)},a["a"].use(x),a["a"].use(o["a"]),window.Vue=a["a"],window.vue=new a["a"]({i18n:new o["a"](ut),data:{store:x,config:y},router:it,render:function(t){return t(_)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("e332"),o=n.n(a);o.a},"5d61":function(t,e,n){},"656d":function(t,e,n){"use strict";var a=n("292a"),o=n.n(a);o.a},"712d":function(t,e,n){"use strict";var a=n("fd54"),o=n.n(a);o.a},7511:function(t,e,n){},"78e7":function(t,e,n){},8233:function(t,e,n){"use strict";var a=n("53e8"),o=n.n(a);o.a},a3aa:function(t,e,n){"use strict";var a=n("78e7"),o=n.n(a);o.a},a58b:function(t,e,n){},b1b0:function(t,e,n){"use strict";var a=n("50d0"),o=n.n(a);o.a},b7fb:function(t,e,n){"use strict";var a=n("7511"),o=n.n(a);o.a},deed:function(t,e,n){},e332:function(t,e,n){},fd54:function(t,e,n){}});
//# sourceMappingURL=app.49125600.js.map