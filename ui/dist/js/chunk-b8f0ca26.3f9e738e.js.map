{"version":3,"sources":["webpack:///./src/views/host/edit-place.vue?1532","webpack:///src/views/host/edit-place.vue","webpack:///./src/views/host/edit-place.vue?5cf6","webpack:///./src/views/host/edit-place.vue","webpack:///./src/views/host/edit-place.vue?39d9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","form","id","on","$event","preventDefault","save","directives","name","rawName","value","expression","attrs","domProps","target","composing","$set","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","_l","$store","type","key","$t","staticStyle","loc_city","loc_addr","loc_lat","loc_lon","village","city","state","road","pics","length","slidesPerView","spaceBetween","autoHeight","pagination","el","navigation","nextEl","prevEl","token","style","$utils","image_md","slot","_e","uploading_files","addImages","perk","perks","includes","splice","indexOf","push","is_saving","$router","back","staticRenderFns","components","locationPicker","data","methods","initForm","$http","get","images","input","accept","onchange","console","log","e","files","uploaded","size","base64","i","fd","click","post","watch","immediate","handler","component"],"mappings":"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","file":"js/chunk-b8f0ca26.3f9e738e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.form)?_c('div',{staticClass:\"page-place-form mx-2\"},[_c('h1',[_vm._v(_vm._s(_vm.form.id ? 'Edit' : 'Create')+\" Place\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_c('fieldset',{staticClass:\"form-group\"},[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Basic Info\")]),_c('div',{staticClass:\"my-form-row\"},[_vm._v(\"\\n        Name\\n        \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.name),expression:\"form.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.form.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"my-form-row\"},[_vm._v(\"\\n        Type\\n        \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.type),expression:\"form.type\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"type\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.$store.place_types),function(type){return _c('option',{key:type,domProps:{\"value\":type}},[_vm._v(_vm._s(_vm.$t((\"place_type.\" + type))))])}),0)])]),_c('fieldset',{staticClass:\"form-group\"},[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Address\")]),_c('div',{directives:[{name:\"square\",rawName:\"v-square\",value:(.5),expression:\".5\"}],staticClass:\"my-form-row\",staticStyle:{\"min-height\":\"50vh\"}},[_c('location-picker',{attrs:{\"city\":_vm.form.loc_city,\"addr\":_vm.form.loc_addr,\"lat\":_vm.form.loc_lat,\"lon\":_vm.form.loc_lon,\"with_addr\":true},on:{\"update:city\":function($event){return _vm.$set(_vm.form, \"loc_city\", $event)},\"update:addr\":function($event){return _vm.$set(_vm.form, \"loc_addr\", $event)},\"update:lat\":function($event){return _vm.$set(_vm.form, \"loc_lat\", $event)},\"update:lon\":function($event){return _vm.$set(_vm.form, \"loc_lon\", $event)},\"addr\":function($event){_vm.$set(_vm.form, 'loc_city', $event.village || $event.city || $event.state); _vm.$set(_vm.form, 'loc_addr', $event.road)}}})],1),_c('div',{staticClass:\"my-form-row mt-1\"},[_vm._v(\"\\n        City\\n        \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.loc_city),expression:\"form.loc_city\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.form.loc_city)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"loc_city\", $event.target.value)}}})]),_c('div',{staticClass:\"my-form-row\"},[_vm._v(\"\\n        Road\\n        \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.loc_addr),expression:\"form.loc_addr\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.form.loc_addr)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"loc_addr\", $event.target.value)}}})])]),_c('fieldset',{staticClass:\"form-group\"},[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Images (\"+_vm._s(_vm.form.pics.length)+\")\")]),_c('div',{staticClass:\"my-form-row\"},[_c('div',{staticStyle:{\"width\":\"100%\"}},[(_vm.form.pics.length)?_c('swiper',{staticStyle:{\"margin\":\"10px -1rem\"},attrs:{\"options\":{\n              slidesPerView: 1,\n              /* effect: 'coverflow', */\n              /* freeMode: true, */\n              spaceBetween: 0,\n              autoHeight: true,\n              pagination: {\n                el: '.swiper-pagination',\n                type: 'progressbar'\n              },\n              navigation: {\n                nextEl: '.swiper-button-next',\n                prevEl: '.swiper-button-prev'\n              }\n            }}},[_vm._l((_vm.form.pics),function(token){return _c('swiper-slide',{key:token,staticStyle:{\"background-color\":\"#222\"}},[_c('div',{directives:[{name:\"square\",rawName:\"v-square\",value:(9/16),expression:\"9/16\"}],style:('margin: 1rem; background-size: contain; background-position: center center; background-repeat: no-repeat; background-image: url('+_vm.$utils.image_md(token)+')')},[_c('div',{staticClass:\"btn-del\"})])])}),_c('div',{staticClass:\"swiper-pagination\",attrs:{\"slot\":\"pagination\"},slot:\"pagination\"}),_c('div',{staticClass:\"swiper-button-prev\",attrs:{\"slot\":\"button-prev\"},slot:\"button-prev\"}),_c('div',{staticClass:\"swiper-button-next\",attrs:{\"slot\":\"button-next\"},slot:\"button-next\"})],2):_vm._e(),(_vm.uploading_files.length)?_c('div',[_vm._v(\"Uploading \"+_vm._s(_vm.uploading_files.length)+\" files...\")]):_vm._e(),_c('div',{},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addImages()}}},[_vm._v(\"Add images\")])])],1)])]),_c('fieldset',{staticClass:\"form-group\"},[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Features\")]),_vm._l((_vm.$store.place_perks),function(perk){return _c('div',{key:perk,staticClass:\"my-form-row\"},[_c('label',[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.form.perks.includes(perk)},on:{\"change\":function($event){_vm.form.perks.includes(perk) ? _vm.form.perks.splice(_vm.form.perks.indexOf(perk), 1) : _vm.form.perks.push(perk)}}}),_vm._v(\"\\n          \"+_vm._s(_vm.$t((\"place_perk.\" + perk)))+\"\\n        \")])])})],2),_c('div',{staticClass:\"text-center my-4\"},[_c('button',{staticClass:\"btn btn-danger\",attrs:{\"disabled\":_vm.is_saving,\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.$router.back()}}},[_vm._v(\"Back\")]),_vm._v(\"\\n      Â \\n      \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":_vm.is_saving,\"type\":\"submit\"}},[_vm._v(\"Save\")])])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"html\">\n  <div class=\"page-place-form mx-2\" v-if=\"form\">\n    <h1>{{ form.id ? 'Edit' : 'Create' }} Place</h1>\n    <form @submit.prevent=\"save\">\n      <fieldset class=\"form-group\">\n        <legend class=\"legend\">Basic Info</legend>\n        <div class=\"my-form-row\">\n          Name\n          <input v-model=\"form.name\" type=\"text\" class=\"form-control\"/>\n        </div>\n        <div class=\"my-form-row\">\n          Type\n          <select v-model=\"form.type\" class=\"form-control\">\n            <option v-for=\"type in $store.place_types\" :key=\"type\" :value=\"type\">{{ $t(`place_type.${type}`) }}</option>\n          </select>\n        </div>\n      </fieldset>\n\n      <fieldset class=\"form-group\">\n        <legend class=\"legend\">Address</legend>\n        <div class=\"my-form-row\" v-square=\".5\" style=\"min-height: 50vh\">\n          <location-picker\n          :city.sync=\"form.loc_city\"\n          :addr.sync=\"form.loc_addr\"\n          :lat.sync=\"form.loc_lat\"\n          :lon.sync=\"form.loc_lon\"\n          :with_addr=\"true\"\n          @addr=\"$set(form, 'loc_city', $event.village || $event.city || $event.state); $set(form, 'loc_addr', $event.road)\"\n          />\n        </div>\n        <div class=\"my-form-row mt-1\">\n          City\n          <input v-model=\"form.loc_city\" type=\"text\" class=\"form-control\"/>\n        </div>\n        <div class=\"my-form-row\">\n          Road\n          <input v-model=\"form.loc_addr\" type=\"text\" class=\"form-control\"/>\n        </div>\n      </fieldset>\n\n      <fieldset class=\"form-group\">\n        <legend class=\"legend\">Images ({{ form.pics.length }})</legend>\n        <div class=\"my-form-row\">\n          <div style=\"width: 100%\">\n            <swiper v-if=\"form.pics.length\" style=\"margin: 10px -1rem;\" :options=\"{\n                slidesPerView: 1,\n                /* effect: 'coverflow', */\n                /* freeMode: true, */\n                spaceBetween: 0,\n                autoHeight: true,\n                pagination: {\n                  el: '.swiper-pagination',\n                  type: 'progressbar'\n                },\n                navigation: {\n                  nextEl: '.swiper-button-next',\n                  prevEl: '.swiper-button-prev'\n                }\n              }\">\n              <swiper-slide v-for=\"token in form.pics\" :key=\"token\" style=\"background-color: #222\">\n                <div :style=\"'margin: 1rem; background-size: contain; background-position: center center; background-repeat: no-repeat; background-image: url('+$utils.image_md(token)+')'\" v-square=\"9/16\">\n                  <div class=\"btn-del\">\n\n                  </div>\n                </div>\n              </swiper-slide>\n              <div class=\"swiper-pagination\" slot=\"pagination\"></div>\n              <div class=\"swiper-button-prev\" slot=\"button-prev\"></div>\n              <div class=\"swiper-button-next\" slot=\"button-next\"></div>\n            </swiper>\n            <div v-if=\"uploading_files.length\">Uploading {{ uploading_files.length }} files...</div>\n            <div class=\"\">\n              <button @click=\"addImages()\" type=\"button\" class=\"btn btn-outline-primary\">Add images</button>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n\n\n      <fieldset class=\"form-group\">\n        <legend class=\"legend\">Features</legend>\n        <div v-for=\"perk in $store.place_perks\" :key=\"perk\" class=\"my-form-row\">\n          <label>\n            <input type=\"checkbox\" :checked=\"form.perks.includes(perk)\"\n            @change=\"form.perks.includes(perk) ? form.perks.splice(form.perks.indexOf(perk), 1) : form.perks.push(perk)\"/>\n            {{ $t(`place_perk.${perk}`) }}\n          </label>\n        </div>\n      </fieldset>\n      <div class=\"text-center my-4\">\n        <button :disabled=\"is_saving\" @click.prevent=\"$router.back()\" class=\"btn btn-danger\" type=\"button\">Back</button>\n        &nbsp;\n        <button :disabled=\"is_saving\" class=\"btn btn-primary\" type=\"submit\">Save</button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport locationPicker from '@/components/location-picker'\n\nexport default {\n  components: {\n    locationPicker,\n  },\n\n  data () {\n    return {\n      form: null,\n      is_saving: false,\n      uploading_files: [],\n    }\n  },\n\n  methods: {\n    initForm () {\n      let id = this.$route.params.id\n      if (!id) {\n        this.form = {\n          perks: [],\n          pics: [],\n          images: [],\n          loc_city: '',\n          loc_addr: '',\n          loc_lat: 0,\n          loc_lon: 0,\n        }\n      } else {\n        this.form = null\n        this.$http.get(`places/${id}`).then(res => {\n          this.form = res.data\n        })\n      }\n    },\n\n    addImages () {\n      let input = document.createElement('input')\n      input.type = 'file'\n      input.accept = 'image/*'\n      input.multiple = 1\n      input.onchange = e => {\n        console.log(e.target.files)\n        for (let i = 0; i < e.target.files.length; i++) {\n          this.$utils.resizeImage(e.target.files[i], base64 => {\n            let fd = {\n              uploaded: 0,\n              size: base64.length,\n            }\n            this.uploading_files.push(fd)\n            this.$http.post('files/image', { base64 }).then(res => {\n              this.form.pics.push(res.data)\n            }).finally(() => {\n              let i = this.uploading_files.indexOf(fd)\n              console.log('removing', i, fd)\n              this.uploading_files.splice(i, 1)\n            })\n          })\n        }\n      }\n      input.click()\n    },\n\n    save () {\n      this.is_saving = true\n      this.$http.post(`places`, this.form).then(res => {\n        // this.form = res.data\n        if (this.form.user_id == this.$store.user.id) this.$store.refreshUser()\n        if (!this.form.id) {\n          this.$router.replace({ name: 'edit-room', params: { id: res.data.id } })\n        } else {\n          this.$router.push({ name: 'manage-place', params: { id: res.data.id } })\n        }\n      }).finally(() => { this.is_saving = false })\n    }\n  },\n\n  watch: {\n    '$route.params.id': {\n      immediate: true,\n      handler () {\n        this.initForm()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.page-place-form {\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-place.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-place.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit-place.vue?vue&type=template&id=da7ab6b2&lang=html&\"\nimport script from \"./edit-place.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-place.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit-place.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-place.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-place.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}